{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"work","text":"<p><code>work</code> allows manual time tracking with an interaction model inspired by <code>git</code>.</p> <p>Documentation: this page</p> <p>PyPI package: https://pypi.org/project/work/</p>"},{"location":"#key-concepts","title":"Key concepts","text":"<ol> <li>Human-readable text files for storage. This makes it easy to track the log with <code>git</code> or perform manual edits.</li> <li>The tool does not run continously and instead maintains the current state on disk.</li> <li>Global work status, meaning any terminal can be used to check or update it.</li> </ol>"},{"location":"#features","title":"Features","text":"<ul> <li>Time tracking<ul> <li>Track time while working and (optionally) add a category and message.</li> <li>Retroactively add and modify any entry.</li> </ul> </li> <li>Analyses<ul> <li>Calculate and check the hours worked over arbitrary periods.</li> <li>List tracked entries by date or category with optional filters.</li> </ul> </li> <li>Overtime and undertime<ul> <li>Configure \"expected hours\" and view the accumulated over-/undertime.</li> <li>(Optionally) store vacations or holidays.</li> </ul> </li> <li>Export entries as CSV</li> </ul>"},{"location":"#installation","title":"Installation","text":"<p>Using pipx for the installation is recommended:</p> <pre><code>pipx install work\n</code></pre> <p>Of course, installing with <code>pip</code> works as well:</p> <pre><code>pip install --user work\n</code></pre>"},{"location":"#getting-started","title":"Getting Started","text":"<p>Find a list of example use cases on the page Examples.</p> <p>Furthermore, check out the help pages:</p> <ul> <li><code>work --help</code> shows an overview</li> <li><code>work &lt;cmd&gt; --help</code> shows help for any sub-command</li> </ul>"},{"location":"examples/","title":"User Guide","text":"<p>Let's go over the features of <code>work</code> with an example use case.</p>"},{"location":"examples/#time-tracking","title":"Time tracking","text":"<p>Assume we start our workday and enter the office at 10:00. We meet a colleague in the hall and discuss our project until 10:30. Then, we sit down at our desk and start our computer. We open a shell and type:</p> <pre><code>$ work start 10\nStarted work at 10:00 today\n\n$ work switch 10:30 -c project -m \"Discussion with colleague\"\nSwitched work at 10:30 today (30 m recorded)\n</code></pre> <p>What has now happened is that we...</p> <ul> <li>...added our first entry to the log from 10:00\u201310:30 with category \"project\" and a message.</li> <li>...started a new work item at 10:30.</li> </ul> <p>Assume that we also discussed with our colleague yesterday, but we forgot to track that in our log. Furthermore, we worked the rest of the day on our project and developed new features. To retroactively add the entries, we type:</p> <pre><code>$ work add --date yesterday 10 10:30 -c project -m \"Discussion with colleague\"\nAdded a record from 10:00 to 10:30 yesterday\n\n$ work add --date yesterday 10:30 16 -c project -m \"Development\"\nAdded a record from 10:30 to 16:00 yesterday\n</code></pre> <p>Let's inspect what has now been logged:</p> <pre><code>$ work ls --since yesterday\nTue, 21.06.: 2 records\n10:00 \u2013 10:30 | 30 m      (project) \"Discussion with colleague\"\n10:30 \u2013 16:00 | 5 h 30 m  (project) \"Development\"\n              = 6 h\n\nWed, 22.06.: 1 records\n10:00 \u2013 10:30 | 30 m  (project) \"Discussion with colleague\"\n              = 30 m\n\nTotal: 3 records, 6 h 30 m worked\n</code></pre> <p>Notice:</p> <ul> <li>We have added two identical entries to the log, one with <code>work add</code>, and one with <code>work start</code> and <code>work switch</code>.</li> <li>We are currently working, but no entry has been logged yet.</li> </ul> <p>We realize that we actually took a break before starting to work at 10:45. To change the start time of the active run, we use <code>work start --force</code>.</p> <pre><code>$ work start 1045 --force\nStarted work at 10:45 today\n</code></pre> <p>Now, we want to check if this did what we expected and <code>work</code> is currently \"active\" and a run has been started at 10:45. For that, we can do one of the following:</p> <ol> <li> <p><code>work status</code> checks if a run is currently active and additionally informs us about our workday (expected hours, week balance).</p> <pre><code>$ date                                            # assume it is 11:38\nWed, 22. Jun 2022, 11:38:20 CEST\n\n$ work status                                     # check work status (at 11:38)\nActive since 10:45 today (0 h 53 m)\n&gt; 1 h 23 m worked until now \u2013 1 entry on record   # includes log entries + active run\n&gt; Last entry ends at 10:30                        # last entry stored in log\n\nWorkday status:\n  6 h 7 m left (until 17:45)                     # time to complete expected hours\n  Week balance: On time\n</code></pre> </li> <li> <p><code>work list --include-active</code> (alias <code>ls</code>) lists logged entries but includes the active run.</p> <pre><code>$ work ls --include-active\nWed, 22.06.: 1 records (+ active run)\n10:00 \u2013 10:30 | 30 m     (project) \"Discussion with colleague\"\n10:45 ~       | 0 h 53 m\n              = 1 h 23 m\n</code></pre> </li> <li> <p>Finally, we can use the special short-hand <code>work day</code>, which is equivalent to <code>work list --include-active --with-breaks --list-empty</code>.</p> <pre><code>$ work day\nWed, 22.06.: 1 records (+ active run)\n10:00 \u2013 10:30 | 30 m     (project) \"Discussion with colleague\"\n              ~ 15 m break\n10:45 ~       | 0 h 53 m\n              = 1 h 23 m (+ 15 m of breaks)\n</code></pre> </li> </ol>"},{"location":"examples/#analysis-and-modification","title":"Analysis and modification","text":"<p>We want to look back at our work week and understand (1) how much we worked and (2) on which projects. First, we check how much we worked with <code>work view balance</code>:</p> <pre><code>$ work view balance --week\nDay      Date      Days    Expected    Worked       Balance graph\n-----------------------------------------------------------------------\nMon      20.06.    1       8 h         8 h          |        |        |\nTue      21.06.    1       8 h         6 h          |      ==|        |\nWed      22.06.    1       8 h         30 m         |========|        |\nThu      23.06.    1       8 h         -            |========|        |\nFri      24.06.    1       8 h         -            |========|        |\nSat      25.06.    1       -           -            |        |        |\nSun      26.06.    1       -           -            |        |        |\n-----------------------------------------------------------------------\nTotal              7       40 h        14 h 30 m    25 h 30 m remaining\n</code></pre> <p>As it is currently Wednesday, we have of course not logged any hours for Thursday and Friday yet. Note that, on Tuesday, we have accumulated 2 hours of undertime.</p> <p>Next, let's see exactly what we worked on this week with <code>work view by-category</code>:</p> <pre><code>$ work view by-category -w\ncategory    hours        %      records\n---------------------------------------\nproject     11 h 30 m    79%    4\nsocial      3 h          21%    1\n---------------------------------------\nTotal       14 h 30 m           5\n</code></pre> <p>This shows us that we have spent over 20 % of our time on social events - that can't be right! We must have a mistake in our log. Let's check by only viewing entries with category \"social\":</p> <pre><code>$ work ls -w --Fc social\nMon, 20.06.: 1 records\n10:00 \u2013 13:00 | 3 h  (social)\n              = 3 h\n\nTotal: 1 records, 3 h worked\n</code></pre> <p>Assume we made a mistake \u2013 we actually did not socialize from 10-13, but instead we were in a meeting from 11-13. Let's fix our mistake and force-add an entry to override the wrong log:</p> <pre><code>$ work ls --day mon\nMon, 20.06.: 2 records\n10:00 \u2013 13:00 | 3 h  (social)\n13:00 \u2013 18:00 | 5 h  (project)\n              = 8 h\n\n$ work add --force --day mon 11 13 -c project -m \"Meeting\"\nExisting record shortened (was 10:00 \u2013 13:00): 10:00 \u2013 11:00 (social) \"\"\nAdded a record from 11:00 to 13:00 on Monday, 20.06.2022\n\n$ work ls --day mon\nMon, 20.06.: 3 records\n10:00 \u2013 11:00 | 1 h  (social)\n11:00 \u2013 13:00 | 2 h  (project) \"Meeting\"\n13:00 \u2013 18:00 | 5 h  (project)\n              = 8 h\n</code></pre> <p>Now let's say this was not correct either. There was no meeting, instead we worked the whole day on coding in our project. Furthermore, we forgot to add a message denoting that.</p> <p>Let's reword the message of both entries with the interactive edit mode:</p> <pre><code>$ work edit --day mon\nEdit mode \u2013 on Monday, 20.06.2022\n\n[0] 10:00 \u2013 11:00 (social) \"\"\n[1] 11:00 \u2013 13:00 (project) \"Meeting\"\n[2] 13:00 \u2013 18:00 (project) \"\"\n\nEnter nothing to cancel, or\nEnter one or more indices [0..2] separated by a space, or\nEnter \"all\" to edit all entries.\n\nWhich entries? &gt; 1 2\n\n &gt; Selected record: 11:00 \u2013 13:00 (project) \"Meeting\"\n\n# [...]\nNew message or remove [\"-\"]? (Meeting) Development\nChange\n  11:00 \u2013 13:00 (project) \"Meeting\"\nto\n  11:00 \u2013 13:00 (project) \"Development\"\n? [Y/n]\n\nDone\n\n &gt; Selected record: 13:00 \u2013 18:00 (project) \"\"\n\n# [...]\nNew message or remove [\"-\"]? () Development\nChange\n  13:00 \u2013 18:00 (project) \"\"\nto\n  13:00 \u2013 18:00 (project) \"Development\"\n? [Y/n]\n\nDone\nInfo: Detected mergeable entries in protocol. Merging...\n    11:00 \u2013 13:00 (project) \"Development\"\n  + 13:00 \u2013 18:00 (project) \"Development\"\n  = 11:00 \u2013 18:00 (project) \"Development\"\nEdited 2 records\n\n$ work ls --day mon\nMon, 20.06.: 2 records\n10:00 \u2013 11:00 | 1 h  (social)\n11:00 \u2013 18:00 | 7 h  (project) \"Development\"\n              = 8 h\n</code></pre> <p>Thereby, we could also see a second hidden feature: entries with the same category and message that are adjacent in the protocol are automatically merged.</p>"},{"location":"examples/#overtime-and-undertime","title":"Overtime and undertime","text":"<p>In the previous examples, we can already see the overtime calculation at work. Based on the configured expected hours to work, it calculates over- and undertime. To configure the expected hours, simply edit the configuration file:</p> <pre><code>$ vim (work config --path)\n</code></pre> <p>One other case may arise \u2013 atypical free days such as holidays or vacations. On such days, we do not expect to work, even if it is a regular day of the week. To make sure that overtime and undertime are correctly calculated, we can add these as follows:</p> <pre><code>$ work free-days --add-holiday 21.\nAdded holiday on 21.06.2022\n\n$ work free-days --add-vacation 24.\nAdded vacation on 24.06.2022\n</code></pre> <p>This also shows us that date parsing is relative to the current day, allowing us to just state \"24.\" for \"24.06.2022\".</p> <p>Now, let's verify this did what we expect it to. The easiest way to see expected hours is to use <code>work view balance</code>:</p> <pre><code>$ work view balance --week\nDay      Date      Days    Expected    Worked       Balance graph\n-----------------------------------------------------------------------\nMon      20.06.    1       8 h         8 h          |        |        |\nTue      21.06.    1       -           6 h          |        |======  |\nWed      22.06.    1       8 h         30 m         |========|        |\nThu      23.06.    1       8 h         -            |========|        |\nFri      24.06.    1       -           -            |        |        |\nSat      25.06.    1       -           -            |        |        |\nSun      26.06.    1       -           -            |        |        |\n-----------------------------------------------------------------------\nTotal              7       24 h        14 h 30 m    9 h 30 m remaining\n</code></pre> <p>Looks good. As Tuesday was added as a holiday, our work then counts as overtime. Friday is our vacation, meaning we only have 9 h 30 m remaining for this week.</p> <p>Finally, let's predict expected work end with the <code>work hours</code> command. We only have 9 h 30 m remaining this week, meaning if we work a total of 10 hours today, we are done for the week. Let's not forget that we will take a 1 hour lunch break, though:</p> <pre><code>$ work hours --target 10 --pause 1\n30 m on record, 53 m active run | Current balance: 37 m remaining (2 h to work today)\n\nAssuming you take 1 h of breaks:\n&gt; Work until 21:15 for a 10 hour day. | Balance then: 8 h overtime\n</code></pre> <p>Seems reasonable \u2013 let's go full steam and start our vacation one day early this week!</p>"},{"location":"releases/","title":"Release History","text":""},{"location":"releases/#11-late-night-work-support","title":"1.1: Late night work support","text":"<p>Currently released version: <code>1.1.0</code> (2024-06-06)</p>"},{"location":"releases/#breaking-changes-and-deprecations","title":"Breaking changes and deprecations","text":"<ul> <li>Flag aliases <code>--date</code> and <code>-D</code> have been removed. Instead, use <code>--day</code> or <code>-d</code>.</li> <li>Migrations from versions &lt; <code>0.100</code> have been removed.</li> </ul>"},{"location":"releases/#runs-and-entries-that-cover-midnight-or-extend-beyond-it","title":"Runs and entries that cover midnight or extend beyond it","text":"<p>The headline feature of this release is that runs and entries can now end on midnight or extend beyond it (multi-day runs). This concerns most features and leads to various changes, as described below.</p>"},{"location":"releases/#migration","title":"Migration","text":"<p>Previously, entries could not end at midnight, only at 23:59 or earlier. If you worked around this bug by saving entries with an end time of, e.g., 23:59 that actually ended at 24:00, you can make use of the automatic migration.</p> <p>On first start, you will be offered to optionally migrate existing records. Follow the interactive prompt to move the end time of all entries ending on or after a specified time to 24:00. E.g., an entry <code>22:00 \u2013 23:59</code> can be extended to midnight: <code>22:00 \u2013 24:00</code>.</p>"},{"location":"releases/#the-active-run-can-now-extend-beyond-midnight","title":"The active run can now extend beyond midnight","text":"<p>An active run started on the previous day is now not considered an invalid state any more. Meaning, <code>status</code>, <code>list</code>, and <code>stop</code> work as expected:</p> <pre><code>$ work status  # assuming the current time is 02:13\nActive since 22:00 yesterday (4 h 13 m)\n&gt; 4 h 13 m worked until now \u2013 nothing on record\n\nWorkweek status:\n    Done (0 h 11 m over)\n\n$ work list --since yesterday --include-active  # list yesterday and today, including the active run\nTue, 04.06.: 0 records (+ active run)\n22:00 \u2013 24:00 | 2 h  # this virtual \"entry\" will be highlighted in blue, as it's the active run\n              = 2 h\n\nWed, 05.06.: 0 records (+ active run)\n00:00 ~       | 02 h 13 m  # second part of the virtual \"entry\" for the active run\n              = 02 h 13 m\n\nTotal: 2 records (+ active run), 4 h 13 m worked\n\n$ work stop now-  # stop now, but round down\nStopped work at 02:00 today (4 h recorded)\n\n$ work list -s y  # short-hand for --since yesterday\nTue, 04.06.: 1 records\n22:00 \u2013 24:00 | 2 h\n              = 2 h\n\nWed, 05.06.: 1 records\n00:00 \u2013 02:00 | 2 h\n              = 2 h\n\nTotal: 2 records, 4 h worked\n</code></pre> <p>Note that the lingering run heuristic (a check if a run that started the previous day was \"forgotten\") has been reworked. It now triggers only if a run started on the previous day gets longer than 8 hours.</p>"},{"location":"releases/#log-entries-ending-on-midnight-or-extending-beyond-it","title":"Log entries ending on midnight or extending beyond it","text":"<p>To allow <code>stop</code>ping at midnight or adding an entry that touches midnight, <code>24:00</code> is now understood and parsed correctly:</p> <pre><code>$ work status  # assume it is 23:50\nActive since 22:00 (1 h 50 m)\n&gt; 7 h 50 m worked until now \u2013 2 entries on record\n&gt; Last entry ends at 22:00\n# [...]\n\n$ work stop 24:00\nStopped work at 00:00 tomorrow (2 h recorded)  # let me know if you want this to read \"24:00 today\" ;)\n</code></pre> <p>When <code>add</code>ing entries, you can now also enter multi-day entries (extending beyond midnight). E.g., to add a run from 22:00 yesterday to 02:30 today:</p> <pre><code>$ work add -1 22 26:30\nAdded a record from 22:00 yesterday to 02:30 today\n</code></pre> <p>You may enter any \"hour\" up to <code>29</code>. These are considered as relative to the start time (as is common in Japan), so <code>25:05</code> represents <code>01:05</code> on the following day.</p> <p>Note that, when <code>edit</code>ing, you may only enter <code>24:00</code> as an end time \u2013 but no later time.</p>"},{"location":"releases/#even-more-robust-handling-of-overlapping-free-days","title":"Even more robust handling of overlapping free days","text":"<p><code>free-days</code> now deals with overlaps in all scenarios when adding a vacation.</p> <ol> <li>Also checks for configured holidays and offers to remove those dates from the added vacation, just like non-working days (see release notes of <code>0.101</code>).</li> <li>If the vacation overlaps a reduced hour day, a clear error is printed before exiting.</li> </ol>"},{"location":"releases/#other-features","title":"Other features","text":"<ul> <li>You can now force stopping with <code>stop --force</code> and <code>switch --force</code> if the added entry would overlap a stored one.</li> <li>More human-readable error messages<ul> <li>Errors raised when trying to add overlapping entries will now always be nicely formatted, even in corner cases.</li> <li><code>list</code> now detects if the active run overlaps with a stored entry and prints an according error message.</li> </ul> </li> </ul>"},{"location":"releases/#fixed-bugs","title":"Fixed bugs","text":"<ul> <li><code>edit</code> now behaves as expected in dry run mode: by not performing any modifications to the log.</li> </ul>"},{"location":"releases/#internals","title":"Internals","text":"<ul> <li>Debug switches are now set with environment variables.</li> </ul>"},{"location":"releases/#10-new-name-on-pypi-and-the-symbolic-version-1","title":"1.0: New name on PyPI and the (symbolic) \"version 1\"","text":"<p>Final release version: <code>1.0.3</code> (2023-08-23)</p> <p>Finally, you can <code>pipx install work</code>!</p> <p>Since Dan Colish, who owned the name <code>work</code> on PyPI, was so kind to transfer the name, the project has moved to this new name. It is recommended to uninstall <code>work-time-log</code> and do a clean install of <code>work</code> \u2013 your user data survives reinstalls:</p> <ul> <li>If you used <code>pipx</code>: <code>pipx uninstall work-time-log</code> and <code>pipx install work</code></li> <li>If you used <code>pip</code>: <code>pip uninstall work-time-log</code> and <code>pip install --user work</code></li> </ul>"},{"location":"releases/#fixed-bugs_1","title":"Fixed bugs","text":"<ul> <li><code>stop</code><ul> <li>If the stopping time equals the active start, the run is now again cancelled.</li> <li>The run length that would be recorded is now correctly printed for dry runs.</li> </ul> </li> <li><code>list --include-active</code>: Now detects if the listed active run would overlap a stored entry and prints an appropriate error message.</li> </ul>"},{"location":"releases/#0101-command-line-comforts","title":"0.101: Command-line comforts","text":"<p>Final release version: <code>0.101.1</code> (2023-07-21)</p>"},{"location":"releases/#breaking-changes-and-deprecations_1","title":"Breaking changes and deprecations","text":"<ul> <li>Filtering is now case insensitive by default (see Smart case).</li> <li>Date selection flags <code>--date</code> and <code>-D</code> have been deprecated (see Day names and dates...).</li> </ul>"},{"location":"releases/#skip-interactive-selection-or-select-quicker","title":"Skip interactive selection (or select quicker)","text":"<p>For <code>edit</code> and <code>remove</code>, users are presented a list of entries that allows them to interactively select what they want to edit or remove concretely. E.g.:</p> <pre><code>$ work edit -1  # edit yesterday's record\nEdit mode \u2013 Wednesday, 19.07.2023\n\n[0] 08:00 \u2013 12:00 () \"Various tasks\"\n[1] 12:00 \u2013 14:00 (project-B) \"Lunch meeting\"\n\nEnter nothing to cancel, or\nEnter one or more indices [0..1] separated by a space, or\nEnter \"all\" to edit all entries, or \"last\" for the last.\n\nWhich entries? &gt;\n</code></pre> <p>One small change can be seen immediately: the new keyword <code>\"last\"</code> allows easy selection of the last entry added that day.</p> <p>More importantly, though, two new flags were added to both <code>edit</code> and <code>remove</code>: <code>--all</code> and <code>--last</code>. They allow skipping the interactive selection completely.</p> <p>Now, remove all entries recorded on, e.g., Monday with just one command:</p> <pre><code>$ work remove --day mon --all\nRemove mode \u2013 Monday, 17.07.2023\n\n[0] 12:00 \u2013 13:00 (project-A) \"\"\n\nInteractive selection skipped \u2013 selecting \"all\".\nRemoved 1 record\n</code></pre> <p>Or, perhaps even more useful, directly edit the last record added today:</p> <pre><code>$ work edit --last\nEdit mode \u2013 Thursday, 20.07.2023\n\n[0] 12:00 \u2013 14:00 () \"\"\n\nInteractive selection skipped \u2013 selecting \"last\".\n\n &gt; Selected record: 12:00 \u2013 14:00 () \"\"\n\nNew start time? (12:00)\n# ... etc.\n</code></pre>"},{"location":"releases/#filter-with-smart-case","title":"Filter with smart case","text":"<p>Filtering used to be case sensitive. In most cases, though, we do not need case sensitivity. To preserve the option to use case sensitive search, while keeping the command line interface clean, <code>work</code> now employs smart case (popularized by fd).</p> <p>In short:</p> <ul> <li>If the search string is fully lowercase, filtering is case insensitive.</li> <li>If it contains at least one capital letter, it will switch to case sensitive filtering.</li> </ul> <p>E.g.:</p> <pre><code>$ work ls --since 1.1. --Fm \"meet*\"\nTue, 21.03.: 1 record\n11:30 \u2013 12:30 | 1 h  (project-A) \"Meeting\"\n              = 1 h\n\nMon, 22.05.: 2 records\n10:30 \u2013 10:45 | 15 m  (project-A)       \"meeting with josef\"\n11:30 \u2013 11:45 | 15 m  (project-B/task1) \"Meet and Greet\"\n              = 30 m\n\nTotal: 3 records, 1 h 30 m worked\n\n$ work ls --since 1.1. --Fc \"*[AC]*\" --Fm \"Meet*\"\nTue, 21.03.: 1 record\n11:30 \u2013 12:30 | 1 h  (project-A) \"Meeting\"\n              = 1 h\n\nTotal: 1 record, 1 h worked\n</code></pre> <p>Note that, as seen in the examples above, filtering supports glob patterns such as <code>[AC]</code> matching either <code>\"A\"</code> or <code>\"C\"</code>, or <code>*</code> that matches everything. Read more</p>"},{"location":"releases/#day-names-and-dates-can-now-be-used-interchangeably","title":"Day names and dates can now be used interchangeably","text":"<ul> <li>The parsing of day names (e.g., \"monday\") and dates (e.g., \"12.\") were merged.</li> <li>Most visible impact: the flags <code>-d/--date</code> and <code>-D/--day</code> have been merged into one (<code>-d/--day</code>).<ul> <li>The combined flag supports the combination of all valid inputs.</li> <li>E.g., try <code>--date yesterday</code>, <code>-d tue</code>, or <code>-d 15.</code>.</li> <li>The short flag <code>-D</code> and the long flag <code>--date</code> are deprecated and will be removed in a future release.</li> </ul> </li> <li>Small but impactful effect: Most date-dependent flags (e.g., <code>--period</code>, <code>--since</code>) that previously understood only dates now also support day names.<ul> <li>E.g., try <code>list --since sat</code> or <code>free-days --add-vacation mon wed</code></li> <li>Day names and dates can be mixed; e.g., <code>--period mon 5.</code> works.</li> </ul> </li> </ul>"},{"location":"releases/#more-robust-handling-of-overlapping-free-days","title":"More robust handling of overlapping free days","text":"<p><code>free-days</code> now deals with overlaps more robustly. Two features were added:</p> <ol> <li>Adding a vacation now checks for configured non-working days and can remove those dates from the added vacation.</li> <li>Adding any free day now cancels if the chosen date already has a free day stored.</li> </ol>"},{"location":"releases/#removing-non-working-days-before-adding-a-vacation","title":"Removing non-working days before adding a vacation","text":"<p>In most cases, the configuration of \"expected hours\" will be set to expect no work on weekends. Therefore, Saturday and Sunday will be considered \"non-working days\".</p> <p>When adding a vacation that is longer than a week, though, the vacation period will overlap with a weekend. If <code>work</code> is used to track the number of taken vacation days, this is unwanted behavior, as weekends do not count towards the vacation day limit.</p> <p>Therefore, when adding a vacation and if it overlaps with non-working days, the user will be prompted and can choose to have them removed:</p> <pre><code>$ work free-days --add-vacation 31.12.22 5.1.\nThe vacation overlaps with configured non-working day(s): 01.01.2023 (Sunday)\nShould non-working days be removed from the vacation before it is added?\n[Y/n] y\nAdded vacation from 31.12.2022 to 05.01.2023\n</code></pre> <p>This is optional, as the behavior may not always be intended.</p>"},{"location":"releases/#preventing-double-entry-of-free-days","title":"Preventing double entry of free days","text":"<p>The three free day categories \"vacation\", \"holidays\", and \"reduced hour days\" are mutually exclusive by definition. To preempt user errors that require a manual fix, adding any type of free day on a date that already has a free day stored will now be prevented.</p>"},{"location":"releases/#other-features_1","title":"Other features","text":"<ul> <li>New flag <code>hours --for-balance</code> calculates the end time for a target balance; e.g. <code>h -b 2+</code> for 2 h overtime.</li> </ul>"},{"location":"releases/#fixed-bugs_2","title":"Fixed bugs","text":"<ul> <li><code>view balance</code> now handles multi-year weeks correctly as single, continuous weeks.</li> <li><code>edit</code><ul> <li>Does not allow entries to have 0 m length after editing any more.</li> <li>The date is now not printed with an \"on\" before it any more.</li> <li>Edited entries can no longer overlap the active run (the reverse was already impossible).</li> </ul> </li> <li>Time parsing now detects the mode correctly also if an alias is used.</li> </ul>"},{"location":"releases/#0100-aliases-and-macros","title":"0.100: Aliases and macros","text":"<p>Final release version: <code>0.100.4</code> (2023-07-05)</p>"},{"location":"releases/#breaking-changes","title":"Breaking changes","text":"<ul> <li>Configuration file location changed (see User configuration)</li> <li>Some command line flags of <code>config</code> removed (see Other changes)</li> </ul>"},{"location":"releases/#configurable-aliases-and-macros","title":"Configurable aliases and macros","text":"<p>User-defined aliases and macros can now be added via the configuration, for example:</p> <pre><code>{\n    \"aliases\": {\n        \"start\":  [\"1\"],\n        \"stop\":   [\"0\"],\n        \"status\": [\"s\", \"st\"]\n    },\n    \"macros\": {\n        \"s1\": \"status --oneline\"\n    }\n}\n</code></pre>"},{"location":"releases/#aliases","title":"Aliases","text":"<p>An alias is a short name for a mode, e.g. <code>ls</code> for <code>list</code>. Running <code>work --help</code> will show any configured aliases. For the example above, this would look as follows (shortened):</p> <pre><code>$ work --help\n...\n\nmodes:\n  {start, stop, add, status, list, ...}\n    start (1)           Start work\n    stop (0)            Stop work\n    ...\n    status (s, st)      Print the current status\n    ...\n</code></pre> <p>They can be used in place of the command they replace:</p> <pre><code>$ work 1\nStarted work at 23:15 today\n</code></pre> <p>Note that the hardcoded aliases defined in previous versions were removed and instead added to the default configuration.</p> <p>By configuring custom aliases, the defaults can be overwritten.</p>"},{"location":"releases/#macros","title":"Macros","text":"<p>A macro is an arbitrary expansion, e.g. <code>vbw</code> could be configured to mean <code>view balance --week</code>. When a macro is used, it is replaced in the command line with the configured expansion before parsing the arguments, e.g.:</p> <pre><code>$ work s1  # \"s1\" -&gt; \"status --oneline\" (see above)\nInactive\n</code></pre> <p>Note: Macros and the mode argument cannot be combined on the command line. E.g., <code>status s1</code> would be invalid. That means a macro must always include a mode in its expansion, as seen above.</p>"},{"location":"releases/#user-configuration","title":"User configuration","text":""},{"location":"releases/#new-file-location","title":"New file location","text":"<ul> <li>The location is now determined based on the XDG Base Directory Specification</li> <li>In short, the file is stored in <code>$XDG_CONFIG_HOME</code> if that is defined, otherwise in <code>$HOME/.config</code></li> <li>With that change, the file name has now also been changed from <code>.workrc</code> to <code>workrc</code></li> </ul>"},{"location":"releases/#keys-may-now-be-left-unset","title":"Keys may now be left unset","text":"<ul> <li>Configuration keys can now be omitted</li> <li>If left unset, the default value is used instead</li> <li>To check the default values, use <code>config --default</code></li> </ul> <p>Note that for mappings (such as <code>\"expected hours\"</code>), only the complete mapping can be overwritten in the user configuration, not just a single key.</p>"},{"location":"releases/#magic-arguments-to-coerce-rounding","title":"Magic arguments to coerce rounding","text":"<p>When using the keyword <code>now</code>, the current time is rounded either up or down, depending on the command.</p> <p>For example, assuming it is 12:10: <pre><code>$ work start now\nStarted work at 12:00 today  # rounded down\n</code></pre></p> <p>Now, the rounding can be influenced with the new keywords <code>now+</code>, <code>now-</code>, and <code>now!</code>. By using them, one can force rounding up, rounding down, or disable rounding, respectively.</p> <p>Compare to above:</p> <pre><code>$ work start now!\nStarted work at 12:10 today  # not rounded\n</code></pre>"},{"location":"releases/#improved-listing-of-free-days","title":"Improved listing of free days","text":"<p><code>free-days --list</code> has been made more useful.</p> <ol> <li>Now also outputs the number of days in each category and in total.</li> <li>Continuous periods in the output of vacation days are merged.</li> </ol> <p>For example:</p> <pre><code>$ work free-days --list\nHolidays (2 days):\n  01.01.2022\n  10.01.2022\n\nVacations (13 days):\n  10.02 \u2013 11.02.2022 (2 days)\n  21.05 \u2013 31.05.2022 (11 days)\n\nTotal: 15 free days\n</code></pre>"},{"location":"releases/#other-changes","title":"Other changes","text":"<ul> <li><code>config</code>:<ul> <li>Short flags <code>-c</code>, <code>-e</code>, and <code>-s</code> removed.</li> <li>Flag <code>--expected</code> renamed to <code>--default</code>.</li> <li>Flag <code>--create</code> removed (instead, use <code>work config --default &gt; &lt;file_path&gt;</code>).</li> <li><code>--see</code> argument <code>expected hours</code> renamed to <code>expected-hours</code>.</li> </ul> </li> <li><code>--day</code> now excludes the current day when resolving the weekday.</li> <li><code>--period</code> no longer sorts the provided start and end date.</li> <li>Mode <code>day</code> removed (supplanted by macro functionality).</li> <li>Improved messages in case of verification errors.</li> <li>All exceptions, including those raised before argument parsing, are now handled gracefully.</li> <li>Migrations:<ul> <li>Moves configuration file to new location.</li> <li>Converts existing files on Windows to UTF-8 encoding and <code>\\n</code> line terminator.</li> </ul> </li> <li>Brief \"what's new\" message after a version upgrade.</li> </ul>"},{"location":"releases/#fixed-bugs_3","title":"Fixed bugs","text":"<ul> <li><code>list --include-active</code> now layouts correctly if the log is empty, but a run is active.</li> <li><code>hours</code> now says <code>no active run</code> instead of <code>0 m active run</code> if no run is active.</li> <li>The plural form is now only used when a message refers to zero or multiple elements.</li> <li><code>edit</code> now always sorts selected indices in ascending order before starting the edit.</li> <li>Fixes alias handling triggering a key error if no aliases have been configured.</li> <li>Fixes that if the log consisted of just one entry, and that entry was deleted, the integrity check would fail.</li> </ul>"},{"location":"releases/#internals_1","title":"Internals","text":"<ul> <li>Files created on Windows are now encoded in UTF-8 and use the <code>\\n</code> line terminator, as on Linux.</li> <li>In debug mode, a separate flags state is now used. The configuration file is intentionally shared, though.</li> </ul>"},{"location":"releases/#099-getting-a-better-view","title":"0.99: Getting a better view","text":"<p>Final release version: <code>0.99.2.post1</code> (2022-06-28)</p>"},{"location":"releases/#new-mode-view","title":"New mode <code>view</code>","text":"<ul> <li>Until now, the only way to view entries was grouped by date (with <code>list</code>).</li> <li>The new mode <code>view</code> allows other views on entries.</li> <li>This version adds the <code>by-category</code> and <code>balance</code> view.</li> </ul>"},{"location":"releases/#view-by-category","title":"<code>view by-category</code>","text":"<ul> <li>View entries grouped by their category.</li> <li>Use cases:<ul> <li>Quickly view categories used in the past in a compact form.</li> <li>Check how much work was done for a specific project (category), e.g. in the current week.</li> </ul> </li> </ul> <p>For example:</p> <pre><code>$ work view by-category --since 1.2.\ncategory            hours        %      records\n-----------------------------------------------\nproject-A/coding    16 h 30 m    40%    17\nmeetings            9 h          21%    5\n\u2205                   7 h          17%    19\nproject-B/coding    4 h 30 m     10%    7\nproject-B/slides    3 h 30 m     8%     4\nhelp                30 m         1%     1\n-----------------------------------------------\nTotal               41 h                76\n</code></pre> <p>Above, <code>\u2205</code> is used to represent entries without a category.</p> <p>We could combine this with a filter (more on the new filters below) to check how much we worked for <code>project-B</code>:</p> <pre><code>$ work view by-category --since 1.2. --Fc \"project-B*\"\ncategory            hours        %      records\n-----------------------------------------------\nproject-B/coding    4 h 30 m     56%    7\nproject-B/slides    3 h 30 m     44%    4\n-----------------------------------------------\nTotal               8 h                 11\n</code></pre>"},{"location":"releases/#view-balance","title":"<code>view balance</code>","text":"<ul> <li>View the balance, and how it developed, over multiple weeks or longer periods.</li> <li>Until now, the balance was only tracked over the current week. This view allows arbitrary periods for balance calculation.</li> <li>Use case: Check for accumulated overtime over a longer period of time, e.g. the past year or even since you started tracking your work.</li> </ul> <p>For example, assuming it is Tuesday, 2022-02-22:</p> <pre><code>$ work view balance --week\nDay      Date      Days    Expected    Worked       Balance graph\n-----------------------------------------------------------------------\nMon      21.02.    1       8 h         8 h          |        |        |\nTue      22.02.    1       8 h         5 h 45 m     |      ==|        |\nWed      23.02.    1       8 h         -            |========|        |\nThu      24.02.    1       8 h         -            |========|        |\nFri      25.02.    1       8 h         -            |========|        |\nSat      26.02.    1       -           -            |        |        |\nSun      27.02.    1       -           -            |        |        |\n-----------------------------------------------------------------------\nTotal              7       40 h        13 h 45 m    26 h 15 m remaining\n</code></pre> <p>Alternatively, we can take a look back to previous weeks, e.g.:</p> <pre><code>$ work view balance --period 3.1. 20.2.\nWeek     Date range         Days    Expected    Worked       Balance graph\n--------------------------------------------------------------------------------\nw. 01    03.01. \u2013 09.01.    7       32 h        32 h         |        |        |\nw. 02    10.01. \u2013 16.01.    7       40 h        40 h         |        |        |\nw. 03    17.01. \u2013 23.01.    7       40 h        40 h         |        |        |\nw. 04    24.01. \u2013 30.01.    7       40 h        40 h         |        |        |\nw. 05    31.01. \u2013 06.02.    7       40 h        37 h 30 m    |       =|        |\nw. 06    07.02. \u2013 13.02.    7       40 h        42 h 30 m    |        |=       |\nw. 07    14.02. \u2013 20.02.    7       40 h        45 h         |        |=       |\n--------------------------------------------------------------------------------\nTotal                       49      272 h       277 h        5 h overtime\n</code></pre> <p>Longer periods are grouped by month:</p> <pre><code>$ work view balance --period 1.9.21 31.12.2021\nMonth    Date range             Days    Expected    Worked       Balance graph\n-------------------------------------------------------------------------------------\nSep      01.09.21 \u2013 30.09.21    30      176 h       177 h        |        |        |\nOct      01.10.21 \u2013 31.10.21    31      168 h       168 h        |        |        |\nNov      01.11.21 \u2013 30.11.21    30      176 h       180 h        |        |        |\nDec      01.12.21 \u2013 31.12.21    31      144 h       100 h        |      ==|        |\n-------------------------------------------------------------------------------------\nTotal                           122     664 h       625 h        39 h remaining\n</code></pre>"},{"location":"releases/#filtering-for-list-and-view","title":"Filtering for <code>list</code> (and <code>view</code>)","text":"<ul> <li>Beyond selecting the date (range), records can now optionally be filtered based on both category or message.</li> <li>New flags: <code>--filter-category</code> / <code>--Fc</code> and <code>--filter-message</code> / <code>--Fm</code></li> <li>By default, the complete category or message must match, but glob patterns (with <code>*</code>) are supported.</li> </ul> <p>For example:</p> <pre><code>$ work ls\nTue, 22.02.: 3 records\n10:00 \u2013 12:00 | 2 h   (project-B/slides)   \"Slides for customer meeting on 2022-03-01\"\n12:00 \u2013 12:30 | 3 h   (project-A/coding)\n14:00 \u2013 15:00 | 45 m                       \"Cleaned office\"\n              = 5 h 45 m\n\n$ work ls --Fc \"project*\"\nTue, 22.02.: 2 records\n10:00 \u2013 12:00 | 2 h   (project-B/slides)   \"Slides for customer meeting on 2022-03-01\"\n12:00 \u2013 12:30 | 3 h   (project-A/coding)\n              = 5 h\n\n$ work ls --Fc \"project*\" --Fm \"*customer*\"\nTue, 22.02.: 1 record\n10:00 \u2013 12:00 | 2 h   (project-B/slides)   \"Slides for customer meeting on 2022-03-01\"\n              = 2 h\n</code></pre>"},{"location":"releases/#expanded-date-selection","title":"Expanded date selection","text":"<ul> <li><code>add</code>, <code>edit</code>, and <code>remove</code> now also support <code>--yesterday</code> / <code>-1</code> and <code>--day</code></li> <li>For <code>list</code>, <code>view</code>, and <code>export</code>:<ul> <li>New <code>--since</code> selector equivalent to <code>--period X today</code></li> <li>The <code>--month</code> selector now allows (optionally) passing a DATE, to select a month by one of its dates. E.g., <code>--month 1.1.</code> selects January of the current year.</li> </ul> </li> </ul>"},{"location":"releases/#more-robust-editing","title":"More robust <code>edit</code>ing","text":"<ul> <li>The improved handling for multi-record editing introduced in v0.97 has been finalized.</li> <li>Most noticeable will be that now multiple entries can be edited in such a way that each individual edit would be invalid, but the final state is valid again. E.g., two records (<code>10\u201312</code> and <code>12\u201313</code>) can be shifted at once (to <code>10\u201312:30</code> and <code>12:30\u201313</code>).</li> <li>Also, if an individual edit operation encounters an error, the complete edit will be rolled back safely.</li> </ul>"},{"location":"releases/#changes","title":"Changes","text":"<ul> <li><code>--day</code> no longer accepts ambiguous prefixes such as \"s\".</li> <li><code>--help</code>:<ul> <li>Main program now has a \"teaser message\".</li> <li>Does not mention \"protocol\" any more.</li> </ul> </li> <li>If an invalid state is detected but fixed by the user, the originally requested command is now retried automatically.</li> <li>Output:<ul> <li><code>hours</code>: Both <code>--until</code> and <code>--target</code> / <code>-8</code> now print the projected balance at the assumed end time.</li> <li>When stopping or switching, the recorded run length will be printed out, e.g.: <code>Stopped work at 17:30 today (30 m recorded)</code></li> <li>When an invalid state is detected, the user will no longer be offered to \"abort\"; instead use Ctrl-C.</li> <li><code>config --path</code> now only prints the file path, enabling <code>subl (work config --path)</code>.</li> </ul> </li> <li>CLI:<ul> <li><code>switch</code>: The alias <code>pause</code> will be deprecated in an upcoming version; a warning is printed if it's used.</li> <li><code>recess</code>: The primary name has been changed to <code>free-days</code>. The alias <code>recess</code> will remain as an option for now.</li> <li>The short flag for <code>--version</code> is now <code>-V</code>.</li> </ul> </li> <li>This version removes the migration code for the info file introduced in v0.94.</li> </ul>"},{"location":"releases/#fixed-bugs_4","title":"Fixed bugs","text":"<ul> <li><code>status</code>:<ul> <li>Note \"reduced hour day\" no longer printed just because expected hours are less than 8.</li> <li>Note \"work until\" now incorporates start time of active run in calculation of end time.</li> </ul> </li> <li><code>switch</code>: Now checks if the switch time equals the start time of the active run (meaning the run would simply cancelled and immediately restarted at the same time) and prints a warning instead.</li> <li><code>edit</code>: Invalid changes no longer lead to deletion of the last edited record.</li> </ul>"},{"location":"releases/#098-improved-selection-interface-and-fine-grained-hours-calculation","title":"0.98: Improved selection interface and fine-grained <code>hours</code> calculation","text":"<p>Final release version: <code>0.98.1</code> (2021-12-18)</p>"},{"location":"releases/#new-edit-and-remove-selection-interface","title":"New <code>edit</code> and <code>remove</code> selection interface","text":"<ul> <li>A new selection interface to improve readability (inspired by <code>fish</code>'s <code>history</code> tool).</li> <li>Now allows selection of multiple indices at once.</li> <li>By entering nothing, the selection can be immediately cancelled.</li> </ul> <p>For example:</p> <pre><code>$ work add 10 14 -c supre\n$ work add 15 17:5 -m \"ji\"\n$ work edit\nEdit mode \u2013 today\n\n[0] 10:00 \u2013 14:00 (supre) \"\"\n[1] 15:00 \u2013 17:05 () \"ji\"\n\nEnter nothing to cancel, or\nEnter one or more indices [0..1] separated by a space, or\nEnter \"all\" to edit all entries.\n\nWhich entries? &gt; \n</code></pre>"},{"location":"releases/#new-flags-for-hours-calculation","title":"New flags for <code>hours</code> calculation","text":"<ul> <li>New flag <code>--start</code> to override the assumed start time.</li> <li>New flag <code>--pause</code> to include planned breaks in the calculation.</li> <li>Assumptions for the calculations are only printed once if multiple modes are selected.</li> <li>Flag <code>--balance</code> removed \u2013 the balance is now always printed.</li> </ul> <p>For example (assume it is 14:17):</p> <pre><code>$ work start 12\nStarted work at 12:00 today\n\n$ work hours --until 17\n0 m on record, 2 h 17 m active run | Balance: 5 h 43 m remaining (8 h to work today)\n&gt; You will have worked 5 h at target time 17:00.\n\n$ work cancel\nRun cancelled\n\n$ work hours --until 17\n0 m on record, 0 m active run | Balance: 8 h remaining (8 h to work today)\n\nAssuming you start now (14:15):\n&gt; You will have worked 2 h 45 m at target time 17:00.\n\n$ work add 10 12\nAdded a record from 10:00 to 12:00 today\n\n$ work hours --until 17 --target 6 --start 14 --pause 0:30\n2 h on record, 0 m active run | Balance: 6 h remaining (8 h to work today)\n\nAssuming you start at 14:00 and take 30 m of breaks:\n&gt; You will have worked 4 h 30 m at target time 17:00.\n&gt; Work until 18:30 for a 6:00 hour day.\n</code></pre>"},{"location":"releases/#changes_1","title":"Changes","text":"<ul> <li>Corrupted files will now be detected more robustly while parsing. Specifically this covers the case that a file is formatted validly, but the contents violate assumed invariants.</li> </ul>"},{"location":"releases/#fixed-bugs_5","title":"Fixed bugs","text":"<ul> <li><code>recess</code>: If a vacation was added over multiple years, the days were added to both years.</li> <li><code>hours</code>: If a day started with overtime, an exception was raised.</li> </ul>"},{"location":"releases/#097-force-actions-and-edit-better","title":"0.97: Force actions and edit better","text":"<p>Final release version: <code>0.97.4</code> (released 2021-08-17)</p>"},{"location":"releases/#force-start-resume-add","title":"Force <code>start</code>, <code>resume</code>, <code>add</code>","text":"<p>A new <code>--force</code> flag allows intentionally overriding some warnings:</p> <ul> <li><code>start --force</code>: Start even if a run is already active.</li> <li><code>resume --force</code>: Resume even if a new run was already started (undo <code>switch</code>).</li> <li><code>add --force</code>: Insert entries forcefully.<ul> <li>If an entry is subsumed, remove and replace it.</li> <li>If an entry is overlapped, shorten it to make space.</li> <li>If an entry contains the forced entry, split it up and shorten the splits to make space in-between.</li> </ul> </li> </ul> <p>For example:</p> <pre><code>$ work ls\nFri, 28.05.: 1 records\n10:00 \u2013 18:00 | 8 h  (original)\n              = 8 h\n\n$ work add 14 15 -c split --force\nExisting record split up: 10:00 \u2013 18:00 (original) \"\"\n  \u279c  10:00 \u2013 14:00  &amp;  15:00 \u2013 18:00\nAdded a record from 14:00 to 15:00 today\n\n$ work ls\nFri, 28.05.: 3 records\n10:00 \u2013 14:00 | 4 h  (original)\n14:00 \u2013 15:00 | 1 h  (split)\n15:00 \u2013 18:00 | 3 h  (original)\n              = 8 h\n</code></pre>"},{"location":"releases/#new-edit-handling","title":"New <code>edit</code> handling","text":"<ul> <li>When editing <code>\"all\"</code>, edits are only applied after all entries were iterated to allow cancelling any time and prevent some merge conflicts.</li> <li>Category and message can now be removed when editing an entry by entering <code>\"-\"</code> as their new value.</li> <li>Entering nothing and just pressing Enter now accepts a change, as is suggested by <code>[Y/n]</code> in the message.</li> </ul>"},{"location":"releases/#list-output-improvements","title":"<code>list</code> output improvements","text":"<ul> <li><code>--include-active</code> now counts active run in total</li> <li><code>--only-time</code> now merges touching entries for output</li> <li><code>--with-breaks</code>:<ul> <li>now shows breaks in separate lines</li> <li>now omits 0 minute breaks from the output.</li> </ul> </li> </ul>"},{"location":"releases/#changes_2","title":"Changes","text":"<ul> <li><code>switch</code> now only allows one positional argument. To add a break before restarting, use the optional argument <code>--start H:M</code>.</li> <li>The <code>--week</code> selector now allows an optional argument for the week number. If none is given, the current week is assumed.</li> <li><code>hours --target</code> now expects a string formatted as \"H:M\" instead of a float.</li> <li>Entries with empty category and message are now printed as <code>&lt;start&gt; \u2013 &lt;end&gt; () \"\"</code>.</li> <li><code>recess</code>: Clearer error message when removing nonexistent day</li> <li>completions: Global flags no longer suggested after sub-commands</li> <li>packaging: Test modules now omitted from package</li> </ul>"},{"location":"releases/#known-bugs","title":"Known bugs","text":"<ul> <li>When editing <code>\"all\"</code> and changing an entry so that it would be merged with its next neighbor, an exception occurs.</li> </ul>"},{"location":"releases/#096-expected-hour-management","title":"0.96: Expected hour management","text":"<p>Final release version: <code>0.96.3</code></p>"},{"location":"releases/#expected-hour-management","title":"Expected hour management","text":"<ul> <li>New module <code>recess</code><ul> <li>Configure holidays, vacations, and days with reduced expected hours.</li> <li>The expected hours for the week and day will update accordingly.</li> </ul> </li> </ul> <p>For example:</p> <pre><code>$ work recess --add-vacation 1.2. 3.2.\n$ work recess --add-reduced-day 4.2. 2.0\n$ work recess --list\nVacation:\n  01.02.2021\n  02.02.2021\n  03.02.2021\nReduced hour days:\n  04.02.2021 (2.0 hours)\n</code></pre> <ul> <li>Expected hours per weekday can now be configured in the RC file.</li> </ul> <p>For example:</p> <pre><code>{\n  \"expected_hours\": {\n    \"Monday\":    8.0,\n    \"Tuesday\":   8.0,\n    \"Wednesday\": 4.0,\n    \"Thursday\":  8.0,\n    \"Friday\":    8.0,\n    \"Saturday\":  2.0,\n    \"Sunday\":    0.0\n  }\n}\n</code></pre> <p>Check your configuration with <code>work config --see \"expected hours\"</code>.</p>"},{"location":"releases/#calculation-of-presumed-work-time-with-hours","title":"Calculation of presumed work time with <code>hours</code>","text":"<ul> <li><code>--until</code> now handles differently depending on if a run is active.</li> <li>Fixes hour calculation for runs starting in the future (<code>--target</code> and <code>--workday</code>).</li> <li>Fixes presumed start time in <code>--until</code> if no run is active.</li> </ul>"},{"location":"releases/#changes_3","title":"Changes","text":"<ul> <li>Output messages for <code>switch</code> are now more abstract and intuitive.</li> <li><code>work config --expected</code> now prints the default configuration that is used by <code>work config --create</code>.</li> <li>Breaking<ul> <li>Old configuration files are now invalid, due to added (see above) and removed (see below) keys. Create a valid configuration file with <code>work config --create</code>.</li> <li>Autopause functionality removed, including the configuration option</li> </ul> </li> </ul>"},{"location":"releases/#095-export-and-cli-convenience","title":"0.95: export and CLI convenience","text":"<ul> <li>New mode <code>export</code> that enables exporting entries of any date or date range as CSV.</li> <li><code>start</code> now understands the keyword <code>again</code>, enabling easy back-to-back entries after a run was stopped.</li> <li>Time parsing now understands military time, e.g. <code>1400</code> = 14:00.</li> <li>If a corrupted record file is detected on disk, its path is now printed out.</li> </ul>"},{"location":"releases/#fixes","title":"Fixes","text":"<ul> <li>Handles Ctrl-C more cleanly.</li> <li>Fixes bug where entering nothing in <code>rehash</code> lead to a rehash.</li> <li>Fixes bug where <code>list --include-active</code> would crash if an active run starts in the future.</li> </ul>"},{"location":"releases/#094-new-verification-algorithm","title":"0.94: New verification algorithm","text":"<ul> <li>Verification algorithm changed: Replaced MD5 hash with a much faster Adler-32 checksum.<ul> <li>As the hash was only meant to protect against accidental edits, priorities were shifted to increase the speed.</li> <li>Relative speed improvement: About 20\u201350 % faster, more with growing size.</li> <li>Absolute improvement: About 1 ms for large sets of records (5 years * 200 days * 10 records).</li> </ul> </li> <li>Empty folders for years and months in the records directory will be removed now.</li> <li>This version removes the migration code introduced in v0.93. Make sure to migrate your records before updating.</li> </ul> <p>With this update, your info file needs to be updated once. Please run <code>work rehash</code> to do that.</p>"},{"location":"releases/#093-performance-improvements","title":"0.93: Performance improvements","text":"<ul> <li>Alias \"pause\" for <code>switch</code></li> <li>Internal structural changes that make listing a huge number of days quicker.</li> <li>Start-up checks slimmed down to reduce start-up time.</li> <li>Adds verification functionality for traversed record directories; if an unexpected file name or type is encountered, an error is raised.</li> </ul> <p>Due to a bug in previous versions, not all entries were migrated from protocol v2 to protocol v3. It is recommended to run <code>work ls --period 1.1.1900 31.12.2100</code> once (this traverses all entries in the protocol). This will fix any leftover entries automatically.</p>"},{"location":"releases/#092-switch","title":"0.92: switch","text":"<ul> <li>New <code>switch</code> function</li> <li>The <code>pause</code> function was deprecated in favor of the new <code>switch</code> function.</li> <li>The old functionality \"stop at time A, restart at time B\" has been preserved.</li> <li>New: only one time argument can be passed.<ul> <li>This enables a \"switch in place\" functionality.</li> <li>When a new task is started, this command suffices to save the completed work and immediately start a new task.</li> </ul> </li> </ul>"},{"location":"releases/#09-category-and-message","title":"0.9: Category and message","text":"<p>Final release version: <code>0.91</code></p> <ul> <li>Entries can now have an optional category and message.</li> <li>Both can be added when stopping a run or adding an entry.</li> <li>When listing entries, these fields can be displayed.</li> </ul>"}]}